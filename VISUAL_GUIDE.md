# ğŸ“¸ VISUAL GUIDE - FITUR UPLOAD FOTO PROFIL

## 1. Edit Profil Form (update-profile-information-form.blade.php)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Profile Information                                 â”‚
â”‚                                                     â”‚
â”‚ Update your account's profile information and      â”‚
â”‚ email address.                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“· Profile Photo
   Upload a photo (JPEG, PNG, GIF - max 2MB)

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    
   â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   [PREVIEW]  â”‚  â”‚ [Browse...] [Choose...] â”‚
   â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  

   ğŸ‘¤ Name
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ John Doe                            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   âœ‰ï¸ Email
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ john@example.com                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    SAVE     â”‚    Saved. âœ“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Live Preview Feature

### Sebelum Upload:
```
No Photo Uploaded Yet

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ğŸ“·      â”‚  <- Placeholder icon
â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Saat Memilih File (Live Preview):
```
Photo Selected

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚
â”‚   [ACTUAL    â”‚  <- Real preview dari file
â”‚    PHOTO]    â”‚
â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Setelah Upload & Save:
```
Photo Uploaded & Saved

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚
â”‚   [PHOTO]    â”‚  <- Stored & persisted
â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Dashboard Display

### User Profile Card (Before Upload)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Akun                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   ğŸ‘¤       â”‚ Player     â”‚  <- Placeholder Avatar
â”‚  â”‚             â”‚ ID: #0001  â”‚     Generated dari nama
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ’° Isi Saldo       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### User Profile Card (After Upload)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Akun                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   [PHOTO]   â”‚ John Doe  â”‚  <- Real Photo
â”‚  â”‚             â”‚ ID: #0001  â”‚     Uploaded
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ’° Isi Saldo       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. File Upload Flow

```
START
  â†“
User Click "Browse"
  â†“
Select Image File (JPEG/PNG/GIF â‰¤ 2MB)
  â†“
Preview Generates (Alpine.js)
  â†“
User Click "SAVE"
  â†“
Form Submit (multipart/form-data)
  â†“
SERVER SIDE â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â”œâ”€ Validate File
  â”‚   â”œâ”€ Check type: image/jpeg, image/png, image/gif
  â”‚   â”œâ”€ Check size: â‰¤ 2048 KB
  â”‚   â””â”€ Return error jika invalid
  â”‚
  â”œâ”€ Delete Old Photo
  â”‚   â””â”€ Storage::disk('public')->delete(old_path)
  â”‚
  â”œâ”€ Store New Photo
  â”‚   â””â”€ Store to: storage/app/public/profile-photos/[UUID].[ext]
  â”‚
  â””â”€ Save to Database
      â””â”€ users.profile_photo_path = 'profile-photos/[UUID].[ext]'
  
  â””â”€ Redirect to profile.edit with status 'profile-updated'
  â†“
User See Success Message "Saved."
  â†“
User Go to Dashboard
  â†“
Photo Displayed in User Profile Card
  â†“
END
```

---

## 5. Database Schema

### BEFORE Migration
```sql
CREATE TABLE users (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255),
    email VARCHAR(255) UNIQUE,
    email_verified_at TIMESTAMP NULL,
    password VARCHAR(255),
    balance DECIMAL(10,2),
    remember_token VARCHAR(100),
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

### AFTER Migration
```sql
CREATE TABLE users (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255),
    email VARCHAR(255) UNIQUE,
    email_verified_at TIMESTAMP NULL,
    profile_photo_path VARCHAR(255) NULL,          â† NEW COLUMN
    password VARCHAR(255),
    balance DECIMAL(10,2),
    remember_token VARCHAR(100),
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

---

## 6. Storage File System Structure

```
Project Root
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ storage/  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â” [SYMLINK]
â”‚   â”‚   â””â”€â”€ profile-photos/
â”‚   â”‚       â”œâ”€â”€ uuid-1.jpg
â”‚   â”‚       â”œâ”€â”€ uuid-2.png
â”‚   â”‚       â””â”€â”€ uuid-3.gif
â”‚   â”‚
â”‚   â””â”€â”€ ...other files...
â”‚
â””â”€â”€ storage/
    â””â”€â”€ app/
        â””â”€â”€ public/
            â””â”€â”€ profile-photos/  â†â”€ [ACTUAL STORAGE]
                â”œâ”€â”€ uuid-1.jpg
                â”œâ”€â”€ uuid-2.png
                â””â”€â”€ uuid-3.gif
```

**How to Access:**
- Browser: `http://localhost/storage/profile-photos/uuid-1.jpg`
- Laravel: `asset('storage/profile-photos/uuid-1.jpg')`
- Blade: `{{ Auth::user()->profile_photo_url }}`

---

## 7. Validation Rules Breakdown

```
Input Field: profile_photo

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validation Rules                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. nullable                                    â”‚
â”‚    âœ Upload optional (tidak wajib)             â”‚
â”‚                                                â”‚
â”‚ 2. image                                       â”‚
â”‚    âœ File harus image (GD, Imagick, etc)      â”‚
â”‚    âœ Reject: .txt, .pdf, .exe, dll            â”‚
â”‚                                                â”‚
â”‚ 3. mimes:jpeg,png,jpg,gif                      â”‚
â”‚    âœ Hanya format JPEG, PNG, GIF              â”‚
â”‚    âœ Check MIME type (tidak hanya extension)  â”‚
â”‚                                                â”‚
â”‚ 4. max:2048                                    â”‚
â”‚    âœ File size maximum 2048 KB (2 MB)         â”‚
â”‚    âœ Reject jika lebih besar                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Error Messages

### Error Case 1: File Too Large
```
âŒ The profile_photo field must be a file of at most 2048 kilobytes.
```

### Error Case 2: Invalid Format
```
âŒ The profile_photo field must be a file of type: jpeg, png, jpg, gif.
```

### Error Case 3: Not an Image
```
âŒ The profile_photo field must be an image.
```

---

## 9. Success Flow

```
âœ… File Uploaded
   â””â”€ Validation passed
      â””â”€ Old file deleted (if exists)
         â””â”€ New file stored to storage/
            â””â”€ Path saved to database
               â””â”€ Redirect with success message
                  â””â”€ "Saved." appears for 2 seconds
                     â””â”€ Photo visible in all pages
```

---

## 10. Compatibility

| Component | Status | Version |
|-----------|--------|---------|
| Laravel | âœ… | 11.x |
| PHP | âœ… | 8.1+ |
| MySQL | âœ… | 5.7+ |
| Alpine.js | âœ… | 3.x |
| Tailwind CSS | âœ… | 3.x |
| Storage | âœ… | Disk: public |
| Browser | âœ… | All modern browsers |

---

## 11. Testing Scenarios

### âœ… Valid Upload
```
File: photo.jpg (JPEG, 1.5MB)
Result: SUCCESS â†’ Photo saved & displayed
```

### âŒ Invalid Format
```
File: document.pdf
Result: FAILED â†’ Error message shown
```

### âŒ Too Large
```
File: bigphoto.jpg (5MB)
Result: FAILED â†’ Error message shown
```

### âœ… Update Existing
```
Old Photo: exists
New Photo: upload
Result: SUCCESS â†’ Old photo deleted, new photo saved
```

### âœ… No Photo
```
File: (skip upload)
Result: SUCCESS â†’ Placeholder avatar shown
```

---

## ğŸ¯ User Experience

### Desktop
```
1. Click input field
2. Browse from computer
3. Select image
4. See live preview
5. Click Save
6. See success message
7. Go to Dashboard
8. See photo in user card
```

### Mobile
```
1. Tap input field
2. Choose from Camera/Gallery
3. Select/Take photo
4. See live preview
5. Tap Save
6. See success message
7. Navigate to Dashboard
8. See photo in user card
```

---

**Last Updated: 2025-11-12**
